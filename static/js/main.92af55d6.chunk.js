(this["webpackJsonptest-max"]=this["webpackJsonptest-max"]||[]).push([[0],{31:function(t,n,e){},32:function(t,n,e){},34:function(t,n,e){},35:function(t,n,e){},36:function(t,n,e){},37:function(t,n,e){},38:function(t,n,e){"use strict";e.r(n);var a=e(0),c=e(9),r=e.n(c),u=e(4),i=e(6),o=e(3),s=e(5),l=e(2),m="ADD_MATRIX",d="UPDATE_MATRIX_CELL",j="UPDATE_MATRIX",h={rows:0,columns:0,x:0,matrix:[]};var b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:return Object(l.a)(Object(l.a)({},t),{},{rows:n.payload.rows,columns:n.payload.columns,x:n.payload.x,matrix:n.payload.matrix});case d:var e=n.payload.id.split("_"),a=Object(s.a)(e,2),c=a[0],r=a[1],u=Object(o.a)(t.matrix);return u[c][r].amount=n.payload.value,Object(l.a)(Object(l.a)({},t),{},{matrix:u});case j:return Object(l.a)(Object(l.a)({},t),{},{matrix:n.payload.matrix});default:return t}},f=(e(31),e(32),e(1)),x=Object(u.b)((function(t){return{matrix:t.matrix,columns:t.columns}}))((function(t){var n=t.matrix,e=t.columns,c=Object(a.useState)([]),r=Object(s.a)(c,2),u=r[0],i=r[1];return Object(a.useEffect)((function(){!function(t,n){var e={avg:new Array(n).fill(0)};t.forEach((function(t,n){t.forEach((function(t,n){e.avg[n]+=t.amount}))}));var a=e.avg.map((function(n){return Math.round(n/=t.length)}));i(a)}(n,e)}),[n,e]),Object(f.jsx)("div",{className:"average_wrap",style:{gridTemplateColumns:"repeat(".concat(u.length,", 1fr)")},children:u.length>0&&n.length>0?u.map((function(t,n){return Object(f.jsx)("div",{className:"matrix__cell",children:t},n)})):Object(f.jsx)("span",{})})}));e(34);var O=function(t){var n=t.type,e=t.amount,a=t.ratio,c=void 0!==a&&a,r=t.isClose,u=void 0!==r&&r,i=t.id,o=t.updateMat,s=t.handleHover,l=t.sumPercent,m=t.mouseOutPercent,d=t.mouseOutClean;return Object(f.jsxs)("button",{"data-percent":c,className:u?"isClose":"",value:e,onClick:function(){return"sum"===n?"":o(i,e)},onMouseOver:function(){return"sum"===n?l(i,e):s(e)},onMouseOut:function(){return"sum"===n?m(i,e):d()},children:[!1!==c?"".concat(c,"%"):e,!1!==c?Object(f.jsx)("span",{style:{height:"".concat(c,"%")}}):Object(f.jsx)("span",{})]})};e(35);var p=Object(u.b)((function(t){return{matrix:t.matrix,columns:t.columns,x:t.x}}),(function(t){return{updateMatrixCell:function(n,e){return t(function(t,n){return{type:d,payload:{id:t,value:n}}}(n,e))},updateMatrix:function(n){return t(function(t){return{type:j,payload:{matrix:t}}}(n))}}}))((function(t){var n=t.matrix,e=t.columns,c=t.x,r=t.updateMatrixCell,u=t.updateMatrix,i=Object(a.useState)([]),m=Object(s.a)(i,2),d=m[0],j=m[1];function h(t,n){r(t,++n)}function b(t){var e=function(t){for(var e=[],a=[],r=Object(o.a)(n),u=function(){var n=1e3,u=-1e3,i=0,o="",s="",l="";r.forEach((function(a){a.forEach((function(a){e.includes(a.amount)||(a.amount>t&&a.amount<n&&(n=a.amount,o=a.id),a.amount<t&&a.amount>u&&(u=a.amount,s=a.id),1===c&&1e3!==n&&-1e3!==u&&(n<u?(i=n,l=o):(i=u,l=s)))}))})),1===c&&1e3!==n&&-1e3!==u?(e.push(i),a.push(l),c--):-1e3===u?(e.push(n),a.push(o),c--):1e3===n?(e.push(u),a.push(s),c--):(e.push(u,n),a.push(s,o),c-=2)};c>0;)u();for(var i in e){var l=a[i].split("_"),m=Object(s.a)(l,2),d=m[0],j=m[1];r[d][j].isClose=!0}return r}(t);u(e)}function x(){var t=Object(o.a)(n);t.forEach((function(t){t.forEach((function(t){return t.isClose=!1}))})),u(t)}function p(t,e){var a=n[t].map((function(t){return t.ratio=Math.round(100*t.amount/e*10)/10,t})),c=Object(o.a)(n);c[t]=a,u(c)}function v(t){var e=n[t].map((function(t){return t.ratio=!1,t})),a=Object(o.a)(n);a[t]=e,u(a)}return Object(a.useEffect)((function(){!function(t){var n={sum:[]};t.forEach((function(e,a){n.sum[a]=[];var c=0;e.forEach((function(e,r){c+=t[a][r].amount,n.sum[a]=c}))})),j(n.sum)}(n)}),[n]),Object(f.jsx)("div",{className:"matrix__wrap",children:n.length>0?n.map((function(t,a){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"matrix__row",style:{gridTemplateColumns:"repeat(".concat(t.length+2,", 1fr)")},children:[t.map((function(t){return Object(f.jsx)("div",{className:"matrix__cell",children:Object(f.jsx)(O,Object(l.a)(Object(l.a)({},t),{},{updateMat:h,handleHover:b,mouseOutClean:x}))},t.id)})),Object(f.jsx)("div",{className:"matrix__row-sum",children:Object(f.jsx)("div",{className:"matrix__cell",children:Object(f.jsx)(O,{type:"sum",amount:d[a],id:a,sumPercent:p,mouseOutPercent:v})})}),Object(f.jsx)("button",{className:"remove",onClick:function(){return function(t){var e=Object(o.a)(n);e.splice(t,1),e.forEach((function(t,n){t.forEach((function(t,e){t.id="".concat(n,"_").concat(e)}))})),u(e)}(a)},children:"x"})]},a),a===n.length-1?Object(f.jsx)("button",{className:"new_row",onClick:function(){return function(){var t=n.length,a=Object(o.a)(n);a.push([]);for(var c=0;c<e;c++)a[t].push({id:"".concat(t,"_").concat(c),amount:Math.round(899*Math.random()+100)});u(a)}()},children:"Add new row"}):""]})})):Object(f.jsx)("span",{children:"Create your matrix :)"})})})),v=e(11),_=e(17),g=e(18),y=e(8),w=e(20),C=e(19);e(36);var E=function(t){Object(w.a)(e,t);var n=Object(C.a)(e);function e(t){var a;return Object(_.a)(this,e),(a=n.call(this,t)).state={rows:0,columns:0,x:0},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(g.a)(e,[{key:"handleChange",value:function(t){this.setState(Object(v.a)({},t.target.id,+t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault();var n=this.state;this.props.addMatrix(n)}},{key:"render",value:function(){var t=this.state;return Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsxs)("div",{className:"inputs_group",children:[Object(f.jsx)("label",{htmlFor:"m",children:"Rows:"}),Object(f.jsx)("input",{type:"number",id:"rows",min:"1",value:t.rows,onChange:this.handleChange})]}),Object(f.jsxs)("div",{className:"inputs_group",children:[Object(f.jsx)("label",{htmlFor:"n",children:"Columns:"}),Object(f.jsx)("input",{type:"number",id:"columns",min:"1",value:t.columns,onChange:this.handleChange})]}),Object(f.jsxs)("div",{className:"inputs_group",children:[Object(f.jsx)("label",{htmlFor:"n",children:"X:"}),Object(f.jsx)("input",{type:"number",id:"x",min:"0",value:t.x,onChange:this.handleChange})]}),Object(f.jsx)("button",{type:"submit",children:"BUILD"})]})}}]),e}(a.Component),N=Object(u.b)(null,(function(t){return{addMatrix:function(n){return t(function(t){for(var n=[],e=0;e<t.rows;e++){n[e]=[];for(var a=0;a<t.columns;a++)n[e][a]={id:"".concat(e,"_").concat(a),amount:Math.round(899*Math.random()+100)}}return{type:m,payload:{rows:t.rows,columns:t.columns,x:t.x,matrix:n}}}(n))}}}))(E);e(37);var M=function(){return Object(f.jsxs)("div",{className:"matrix",children:[Object(f.jsx)("div",{className:"matrix__inputs",children:Object(f.jsx)(N,{})}),Object(f.jsxs)("div",{className:"martrix__wrap",children:[Object(f.jsx)("div",{className:"matrix__top",children:Object(f.jsx)(p,{})}),Object(f.jsx)("div",{className:"matrix__bot",children:Object(f.jsx)(x,{})})]})]})},S=Object(i.c)(b,Object(i.b)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(f.jsx)(u.a,{store:S,children:Object(f.jsx)(M,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.92af55d6.chunk.js.map